-- New script in localhost 3.
-- Connection Type: dev 
-- Url: jdbc:oracle:thin:@//localhost:1521/XE
-- workspace : H:\workspace\multi\04_db
-- Date: 2024. 6. 11.
-- Time: 오후 2:29:06



-- ----oracle 버전 menu -스프링부트시 
-- 시퀀스 생성
DROP SEQUENCE SEQ_CATEGORY_CODE;
DROP SEQUENCE SEQ_MENU_CODE;

CREATE SEQUENCE SEQ_CATEGORY_CODE;
CREATE SEQUENCE SEQ_MENU_CODE;

-- 테이블 생성
DROP TABLE tbl_category CASCADE CONSTRAINTS;
DROP TABLE tbl_menu CASCADE CONSTRAINTS;

SELECT * FROM TBL_CATEGORY;
SELECT * FROM TBL_MENU;

-- category 테이블 생성
CREATE TABLE tbl_category
(
    category_code    NUMBER NOT NULL,
    category_name    VARCHAR2(30) NOT NULL,
    ref_category_code    NUMBER
);

COMMENT ON COLUMN tbl_category.category_code IS '카테고리코드';
COMMENT ON COLUMN tbl_category.category_name IS '카테고리명';
COMMENT ON COLUMN tbl_category.ref_category_code IS '상위카테고리코드';
COMMENT ON TABLE tbl_category IS '카테고리';

CREATE UNIQUE INDEX index_category_code ON tbl_category
( category_code );

ALTER TABLE tbl_category
 ADD CONSTRAINT pk_category_code PRIMARY KEY ( category_code )
 USING INDEX index_category_code;

ALTER TABLE tbl_category
 ADD CONSTRAINT fk_ref_category_code FOREIGN KEY ( ref_category_code )
 REFERENCES tbl_category ( category_code);

CREATE TABLE tbl_menu
(
    menu_code    NUMBER NOT NULL,
    menu_name    VARCHAR2(30) NOT NULL,
    menu_price    NUMBER NOT NULL,
    category_code    NUMBER NOT NULL,
    orderable_status    CHAR(1) NOT NULL
);

COMMENT ON COLUMN tbl_menu.menu_code IS '메뉴코드';
COMMENT ON COLUMN tbl_menu.menu_name IS '메뉴명';
COMMENT ON COLUMN tbl_menu.menu_price IS '메뉴가격';
COMMENT ON COLUMN tbl_menu.category_code IS '카테고리코드';
COMMENT ON COLUMN tbl_menu.orderable_status IS '주문가능상태';
COMMENT ON TABLE tbl_menu IS '메뉴';

CREATE UNIQUE INDEX index_menu_code ON tbl_menu
( menu_code );

ALTER TABLE tbl_menu
 ADD CONSTRAINT pk_menu_code PRIMARY KEY ( menu_code )
 USING INDEX index_menu_code;

ALTER TABLE tbl_menu
 ADD CONSTRAINT fk_category_code FOREIGN KEY ( category_code )
 REFERENCES tbl_category ( category_code );

INSERT INTO TBL_CATEGORY VALUES (SEQ_CATEGORY_CODE.NEXTVAL, '식사', null);
INSERT INTO TBL_CATEGORY VALUES (SEQ_CATEGORY_CODE.NEXTVAL, '음료', null);
INSERT INTO TBL_CATEGORY VALUES (SEQ_CATEGORY_CODE.NEXTVAL, '디저트', null);
INSERT INTO TBL_CATEGORY VALUES (SEQ_CATEGORY_CODE.NEXTVAL, '한식', 1);
INSERT INTO TBL_CATEGORY VALUES (SEQ_CATEGORY_CODE.NEXTVAL, '중식', 1);

INSERT INTO TBL_CATEGORY VALUES (SEQ_CATEGORY_CODE.NEXTVAL, '일식', 1);
INSERT INTO TBL_CATEGORY VALUES (SEQ_CATEGORY_CODE.NEXTVAL, '퓨전', 1);
INSERT INTO TBL_CATEGORY VALUES (SEQ_CATEGORY_CODE.NEXTVAL, '커피', 2);
INSERT INTO TBL_CATEGORY VALUES (SEQ_CATEGORY_CODE.NEXTVAL, '쥬스', 2);
INSERT INTO TBL_CATEGORY VALUES (SEQ_CATEGORY_CODE.NEXTVAL, '기타', 2);

INSERT INTO TBL_CATEGORY VALUES (SEQ_CATEGORY_CODE.NEXTVAL, '동양', 3);
INSERT INTO TBL_CATEGORY VALUES (SEQ_CATEGORY_CODE.NEXTVAL, '서양', 3);

INSERT INTO TBL_MENU VALUES (SEQ_MENU_CODE.NEXTVAL, '바닐라라떼', 4500, 8, 'Y');
INSERT INTO TBL_MENU VALUES (SEQ_MENU_CODE.NEXTVAL, '딸기스무디', 5000, 10, 'Y');
INSERT INTO TBL_MENU VALUES (SEQ_MENU_CODE.NEXTVAL, '밀크쉐이크', 6000, 10, 'Y');
INSERT INTO TBL_MENU VALUES (SEQ_MENU_CODE.NEXTVAL, '파르페', 7000, 10, 'Y');
INSERT INTO TBL_MENU VALUES (SEQ_MENU_CODE.NEXTVAL, '김치찜', 13000, 4, 'Y');

INSERT INTO TBL_MENU VALUES (SEQ_MENU_CODE.NEXTVAL, '샐러드', 12000, 4, 'Y');
INSERT INTO TBL_MENU VALUES (SEQ_MENU_CODE.NEXTVAL, '미역국', 15000, 4, 'Y');
INSERT INTO TBL_MENU VALUES (SEQ_MENU_CODE.NEXTVAL, '한우국밥', 20000, 4, 'Y');
INSERT INTO TBL_MENU VALUES (SEQ_MENU_CODE.NEXTVAL, '마카롱', 9000, 12, 'Y');
INSERT INTO TBL_MENU VALUES (SEQ_MENU_CODE.NEXTVAL, '마늘빵', 7000, 12, 'Y');

INSERT INTO TBL_MENU VALUES (SEQ_MENU_CODE.NEXTVAL, '인절미빙수', 10000, 10, 'Y');
INSERT INTO TBL_MENU VALUES (SEQ_MENU_CODE.NEXTVAL, '스크류바', 2000, 10, 'Y');
INSERT INTO TBL_MENU VALUES (SEQ_MENU_CODE.NEXTVAL, '딸기젤라또', 8000, 12, 'Y');
INSERT INTO TBL_MENU VALUES (SEQ_MENU_CODE.NEXTVAL, '커틀릿', 13000, 6, 'Y');
INSERT INTO TBL_MENU VALUES (SEQ_MENU_CODE.NEXTVAL, '튀김우동', 11000, 6, 'Y');

INSERT INTO TBL_MENU VALUES (SEQ_MENU_CODE.NEXTVAL, '아메리카노', 9000, 8, 'Y');
INSERT INTO TBL_MENU VALUES (SEQ_MENU_CODE.NEXTVAL, '붕어빵초밥', 35000, 6, 'Y');
INSERT INTO TBL_MENU VALUES (SEQ_MENU_CODE.NEXTVAL, '코코넛쥬스', 9000, 9, 'Y');

INSERT INTO TBL_MENU VALUES (SEQ_MENU_CODE.NEXTVAL, '백설기', 5000, 11, 'Y');

COMMIT;
